% Another mock chapter

\section{The Data}
Over the course of the evolution of the FIREbox simulation, 1201 snapshots of the state of the universe were collected \citep{feldmannFIREboxSimulatingGalaxies2022}. They were approximately evenly spaced out in time and included the positions of the particles, their densities, metalicities, star-formation rates, and other properties. The particle data was reduced by grouping the particles into their respective galaxies and dark matter halos. They used the AMIGA Halo Finder (AHF; \cite{knollmannAhfAMIGAHALO2009}) to sort the halos into categories of halos and sub-halos, which in turn allowed them to categorize the galaxies by host and satellite galaxies respectively. The reduced data, known as the galaxy and halo catalog, includes galaxy information such as position, radius, mass and star formation rate, as well as data about the dark matter halos around those galaxies. For the extent of this experiment, we will be using the snapshot 1201, the final state of the simulation. This snapshot depicts the simulated present day.

Each parameter for the galaxies is split between a few different definitions. For the purpose of this experiment, we will use the following definitions unless otherwise specified. The galaxy's radius $R_{50}$ is defined to be the radius that contains 50\% of its stars, as determined by AHF. The galaxy's mass $M_*$ is defined to be the mass of the stars contained within $R_{50}$. We are not going to include dark matter in this definition. The reader should note that this is not the only way to define these parameters. Due to the fluid nature of matter on a galactic scale, it is often arbitrary as to whether a given particle belongs to a given galaxy. Alternate definitions include different thresholds for the radius, such as $R_{80}$, and different kinds of matter included in the mass, such as gas matter and dark matter.

Other parameters that we will use are a galaxy's position in space and its flyby distance---a satellite galaxy's minimum distance to its host galaxy. All distances (including radius) are measured in terms of the co-moving parameter $h$, a time-dependent scaling factor of the universe. In the final state of FIREbox, $h = 0.6774 kpc$. 

\cite{mcconnachieOBSERVEDPROPERTIESDWARF2012} compiled a number of data sets for dwarf galaxies in the local group of the Milky Way. One data set includes the galaxies' radii and another contains their mass. The radius is defined slightly differently in this case. It is the half-light radius, the radius from which half of the galaxy's light is emitted. The mass parameter is calculated by assuming a mass-light ratio of one, meaning that the brightness per unit mass is equal to the Sun. For the sake of this experiment, we will assume that the half-light radius is equal to $R_{50}$ the presumed $M_*$ is equal to $M_*$. To get this data in a usable form, I first dumped the text-based datasets into pandas spreadsheets. I removed invalid rows and then merged them by galaxy name. For galaxies whose names were reported differently on the different sheets, I merged them by hand. I then cast the mass and radius to float64 for use in the analysis.



\begin{figure}
    \includegraphics*[width=\textwidth]{figs/feldmann/fig1.pdf}
    \label{fig:feldmann-visual}
    \caption{
        From: \cite{feldmannFIREboxSimulatingGalaxies2022}. A representation of the FIREbox simulation. The first two rows depict the state of the simulation at three different time points; the rightmost images depict the simulation in the present time. The top row depicts dark matter in blue and stellar matter in white, while the middle row depicts gas. The bottom row shows a galaxy at different scales within a cluster. As we can see, matter collects into galaxies and systems of galaxies over the course of the simulated universe's evolution. These galaxies take on a variety of sizes, and they share threads of gas and are contained within hierarchical halos of dark matter.
    }
\end{figure}

\begin{figure}
    \centering
    \includegraphics*[width=\textwidth*11/10]{figs/me/locations.pdf}
    \caption*{
        A 2D visualization of FIREbox; the X and Y coordinates of each galaxy. Host galaxies are depicted as gray circles, and satellites galaxies are triangles that are colored by the distance to their host galaxy. 
    }
\end{figure}

\begin{figure}
    \centering
    \includegraphics[width=\textwidth*11/10]{figs/me/stars-mass-size-r50.pdf}
    % TODO: prettify this graph?
    \caption{
        The left shows the size-mass relationship for the FIREbox dwarf galaxies. It covers the range $3 \cdot 10^3$ - $10^9$. Galaxies larger than this are no longer dwarfs and do not follow the power law, and galaxies smaller than this approach FIREbox's resolution limit. The line of best fit is described by equation \ref{equ:linear-rel} and $\beta$ represents the deviation from that line. $\beta$ is chosen to characterize the diffuseness of a galaxy because the distribution of $\beta$ is essentially independent of mass, which can be seen in on the right.
    }
    \label{fig:size-mass}
\end{figure}

\section{The Diffuseness Parameter}
As diffuseness will be main subject of this paper, let us define it. The dwarf galaxies in FIREbox loosely follow a power law size-mass relationship (see figure \ref{fig:size-mass}). The relationship can therefore be described using the following equation.

\begin{equation}
    \frac{R_{50}}{1 kpc} \approx a
    \left(
        \frac{M_*}{M_\odot}
    \right)
    ^{\gamma}
\end{equation}

Where $\gamma$ and $a$ are constants and $M_\odot$ is the mass of the sun. We are dividing by a kiloparsec unit to make the equation unitless. Taking the logarithm of this equation gives us

\begin{equation}
    \ln \left(
        \frac{R_{50}}{1 kpc}
    \right)
    \approx
    \ln(a)
    + \gamma \ln \left(
        \frac{M_*}{M_\odot}
    \right)
\end{equation} \label{equ:linear-rel}

By taking the logarithm of a power law, we end up with an equation for a line. This linear relationship can be seen in figure \ref{fig:size-mass}. $ln(a)$ becomes the y-intercept of the line and $\gamma$ becomes the slope. We have kept denoting this equation as \emph{approximately} equal in order to emphasize that not every galaxy falls exactly into this relationship. However, we can replace that by introducing a galaxy-specific parameter $\beta$ that is defined to be the galaxy's deviation from this linear relationship.

\begin{equation}
    \ln \left(
        \frac{R_{50}}{1 kpc}
    \right)
    =
    \ln(a)
    + \gamma \ln \left(
        \frac{M_*}{M_\odot}
    \right)
    + \beta
\end{equation} \label{equ:log-log-with-beta}

\begin{equation}
    \beta
    \equiv
    \ln \left(
        \frac{R_{50}}{1 kpc}
    \right)
    -
    \ln(a)
    - \gamma \ln \left(
        \frac{M_*}{M_\odot}
    \right)
\end{equation} \label{equ:beta}

We will call $\beta$ the \textbf{diffuseness parameter}, because it tells us how diffuse a galaxy is relative to its fellow galaxies. Positive values of $\beta$ mean that the galaxy has a larger radius than other galaxies of the same mass, and negative values mean a smaller radius. $\beta$ is especially useful for characterizing the diffuseness because the distribution of $\beta$ remains consistent across all masses of dwarf galaxies (see figure \ref{fig:size-mass}). Note that this does not apply for galaxies larger than $10^9 M_\odot$, as they stop following the power law.

We can calculate $\gamma$ and $\ln(a)$ using equation \ref{equ:linear-rel} and fitting the dataset to a line. We can then use those values in equation \ref{equ:beta} to find each galaxy's value of $\beta$. We can also characterize the \textbf{diversity of the diffuseness} of galaxies using the the standard deviation $\sigma_\beta$ (the mean is zero by design). We will use these values to compare FIREbox with the galaxies of the Local Group.

\section{Proximity}
%TODO: appendix reference
To determine what may cause differences in the diffuseness of galaxies, one thing that we may look at is its interactions with its neighbors. Specifically, we will examine a galaxy's distance to its nearest neighbor as well as a satellite galaxy's distance to its host galaxy (as defined by AHF).

Calculating the distance between two galaxies is not as trivial as it may seem because of the shape of FIREbox. The simulation volume is defined as a cube that repeats itself \citep{feldmannFIREboxSimulatingGalaxies2022}. In other words, if you travel across one border of the universe you appear on the opposite side. This is done to avoid any strange boundary conditions from affecting the simulation, but also without having to simulate an infinite region. In order to measure the X component of the distance between two objects one must first determine whether they are across the X border. If they are, then we find the sum of the distances to the border. Otherwise, we find the difference of their positions like normal. The same logic is used to find the Y and Z components. Only then do we calculate magnitude of the distance.

\subsection{Minimum Proximity}

To determine whether tidal interactions affect the diffuseness of galaxies, it is better to look at the \emph{minimum} distance between a satellite and its host, as opposed to the current distance. The minimum distance is the point at which the tidal forces are strongest, and therefore could cause the most extreme effects. We must therefore also compare $\beta$ to $d_{min}$. 